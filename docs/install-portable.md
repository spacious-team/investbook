#### Оглавление
- [Установка на Windows](install-on-windows.md)
- [Установка на Mac](install-on-mac.md)
- [Установка на Linux](install-on-linux.md)
- [Установка portable версии](install-portable.md)
- [Запуск в Docker](run-by-docker.md)

### Portable версия Investbook

Переносимое приложение (portable версия приложения) не требует установки и может храниться на съёмных носителях.
Переносимая версия позволяет использовать Investbook на многих компьютерах. Переносимая версия может быть запущена
на любой операционной системе: Windows любой версии, любые дистрибутивы Linux и любые версии Mac.

Со страницы [проекта](https://github.com/spacious-team/investbook/releases/latest) нужно скачать архив `.zip`.
Если у Вас Windows, то можно распаковать архив в любом месте. Если у вас Mac или Linux, то рекомендуется
распаковать архив в директорию `/opt`.

Для запуска portable версии потребуется установить Java версии не ниже, указанной в [таблице](#требуемая-версия-java).
Чтобы проверить версию, требуется запустить консоль и выполнить
```shell script
$ java -version
```
Пример вывода
```shell
openjdk version "24" 2025-03-18
OpenJDK Runtime Environment (build 24+36-3646)
OpenJDK 64-Bit Server VM (build 24+36-3646, mixed mode, sharing)
```
Если версия соответствует, то делать ничего не нужно. Если возникает ошибка запуска команды или версия ниже требуемой,
то нужно установить Java.

#### Установка Java на Windows
Нужно скачать Java последней версии со [страницы](https://openjdk.org/) и распаковать в директорию `%LocalAppData%\jdk`.
Далее в папке, в которую распаковали `investbook.zip`, требуется открыть файл `start.bat` и изменить строчку
```shell
::set JAVA_HOME=%LocalAppData%\jdk
```
на
```shell
set JAVA_HOME=%LocalAppData%\jdk
```
и сохранить файл.

#### Установка Java на Mac или Linux
Скачать под вашу ОС Java последней версии со [страницы](https://openjdk.org/) и распаковать в директорию `/opt/jdk`. Далее в директории
`/opt/investbook-*` нужно найти файл `start.sh`, раскомментировать и актуализировать переменную `JAVA_HOME`
   ```shell
export JAVA_HOME=/opt/jdk
```

Альтернативный способ установки Java - воспользоваться менеджером пакетов вашей ОС. В этом случае файл `start.sh`
редактировать не нужно. Однако, менеджер пакетов не всегда может предоставить нужную версию Java.
Проверить наличие нужной версии java и установить можно командой:
- Ubuntu (может быть недоступно)
```shell
$ sudo apt update
$ sudo apt install openjdk-24-jre-headless
```
- Fedora
```shell
sudo dnf install java-latest-openjdk-headless
```
- openSUSE Tumbleweed
```shell
sudo zypper install java-24-openjdk-headless
```

### Запуск Portable версии Investbook
1. Из директории, в которую распаковали `investbook.zip`, запустите приложение. Для этого на Windows запустите
   `start.bat` двойным кликом. Если у Вас Mac и Linux выполните в консоли
   ```shell
   $ chmod +x start.sh
   $ sh start.sh
   ```
2. Откроется браузер, отобразится страница приложения.
   Если браузер не открылся в течении 5-30 сек (в зависимости от производительности вашего компьютера),
   откройте сайт http://localhost:2030. Это локальный сайт, запущенный приложением на вашем компьютере.
3. Если страница не открылась, ознакомьтесь с возможными причинами и [решениями проблем](/src/main/asciidoc/troubleshooting.adoc).
4. Перейти в раздел `Загрузить отчеты брокера`, выбрать отчеты брокера, которые хотите проанализировать, и нажать кнопку
   `загрузить`. Или загрузить отчет из email ящика. Или воспользоваться разделом `Форм` для ручного ввода информации.
5. Нажать `Аналитика`. С форматом аналитического отчета можно ознакомиться в [документации](/src/main/asciidoc/index.adoc).
6. По окончании работы нажмите в верхнем правом углу пиктограмму `Завершить`, если желаете выгрузить приложение
   из памяти компьютера. Или оставьте приложение в памяти для быстрого повторного запуска.

### Обновление приложения

Процесс обновления не отличается от процесса установки.

### Требуемая версия Java

Приложение требует версию Java не ниже указанной в таблице.

| Версия приложения         | Требуемая версия Java |
|---------------------------|-----------------------|
| с 2025.1                  | java 24 и выше        |
| с 2023.3                  | java 21 и выше        |
| с 2023.1                  | java 20 и выше        |
| с 2022.7                  | java 18 и выше        | 
| с 2021.9                  | java 17 и выше        |
| с 2021.5                  | java 16 и выше        |
| c 2020.11                 | java 15 и выше        |
| до 2020.10 (включительно) | java 14 и выше        |

### Установка расширений

Если вы хотите добавить поддержку новых брокеров, то это можно сделать за счет установки расширения.
Получите у сторонних разработчиков расширение, поддерживающее нового брокера, и выложите jar-файл в директорию
`<директория-распаковки-investbopok-zip>/extensions/`.
